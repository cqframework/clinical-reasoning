
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for CQF Clinical Reasoning on FHIR for Java">
      
      
        <meta name="author" content="Smile Digital Health">
      
      
        <link rel="canonical" href="https://www.cqframework.org/clinical-reasoning/developer-guide/">
      
      
        <link rel="prev" href="../operations/">
      
      
      
      <link rel="icon" href="../assets/images/icon/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.2">
    
    
      
        <title>Developer Guide - CQF Clinical Reasoning for Java</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.d7758b05.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#developer-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="CQF Clinical Reasoning for Java" class="md-header__button md-logo" aria-label="CQF Clinical Reasoning for Java" data-md-component="logo">
      
  <img src="../assets/images/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CQF Clinical Reasoning for Java
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Developer Guide
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/cqframework/clinical-reasoning/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="CQF Clinical Reasoning for Java" class="md-nav__button md-logo" aria-label="CQF Clinical Reasoning for Java" data-md-component="logo">
      
  <img src="../assets/images/logo.svg" alt="logo">

    </a>
    CQF Clinical Reasoning for Java
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/cqframework/clinical-reasoning/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CQL
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../operations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operations
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Developer Guide
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Developer Guide
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#repository-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Repository Structure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing" class="md-nav__link">
    <span class="md-ellipsis">
      Contributing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Contributing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#licensing" class="md-nav__link">
    <span class="md-ellipsis">
      Licensing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extensions" class="md-nav__link">
    <span class="md-ellipsis">
      Extensions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#style-guide" class="md-nav__link">
    <span class="md-ellipsis">
      Style Guide
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#branch-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Branch Policy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      Background
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Background">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#systems-of-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Systems of Systems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fhir-platform" class="md-nav__link">
    <span class="md-ellipsis">
      FHIR Platform
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hapi-fhir" class="md-nav__link">
    <span class="md-ellipsis">
      HAPI FHIR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#design-goals" class="md-nav__link">
    <span class="md-ellipsis">
      Design Goals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hexagonal-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Hexagonal Architecture
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fhir-repository" class="md-nav__link">
    <span class="md-ellipsis">
      FHIR Repository
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#java-guidance" class="md-nav__link">
    <span class="md-ellipsis">
      Java Guidance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Java Guidance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#discovery-and-maintainability" class="md-nav__link">
    <span class="md-ellipsis">
      Discovery and Maintainability
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#javadoc" class="md-nav__link">
    <span class="md-ellipsis">
      Javadoc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    <span class="md-ellipsis">
      Testing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#naming-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      Naming Conventions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Naming Conventions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#package-names" class="md-nav__link">
    <span class="md-ellipsis">
      Package names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#artifact-names" class="md-nav__link">
    <span class="md-ellipsis">
      Artifact names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-names" class="md-nav__link">
    <span class="md-ellipsis">
      Class names
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#design-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      Design Conventions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilities" class="md-nav__link">
    <span class="md-ellipsis">
      Utilities
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Utilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#types-of-utilities" class="md-nav__link">
    <span class="md-ellipsis">
      Types of Utilities
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Types of Utilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class-specific-utilities" class="md-nav__link">
    <span class="md-ellipsis">
      Class Specific Utilities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#behavior-specific-utilities" class="md-nav__link">
    <span class="md-ellipsis">
      Behavior Specific Utilities
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#repository-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Repository Structure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing" class="md-nav__link">
    <span class="md-ellipsis">
      Contributing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Contributing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#licensing" class="md-nav__link">
    <span class="md-ellipsis">
      Licensing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extensions" class="md-nav__link">
    <span class="md-ellipsis">
      Extensions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#style-guide" class="md-nav__link">
    <span class="md-ellipsis">
      Style Guide
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#branch-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Branch Policy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      Background
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Background">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#systems-of-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Systems of Systems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fhir-platform" class="md-nav__link">
    <span class="md-ellipsis">
      FHIR Platform
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hapi-fhir" class="md-nav__link">
    <span class="md-ellipsis">
      HAPI FHIR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#design-goals" class="md-nav__link">
    <span class="md-ellipsis">
      Design Goals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hexagonal-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Hexagonal Architecture
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fhir-repository" class="md-nav__link">
    <span class="md-ellipsis">
      FHIR Repository
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#java-guidance" class="md-nav__link">
    <span class="md-ellipsis">
      Java Guidance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Java Guidance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#discovery-and-maintainability" class="md-nav__link">
    <span class="md-ellipsis">
      Discovery and Maintainability
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#javadoc" class="md-nav__link">
    <span class="md-ellipsis">
      Javadoc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    <span class="md-ellipsis">
      Testing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#naming-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      Naming Conventions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Naming Conventions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#package-names" class="md-nav__link">
    <span class="md-ellipsis">
      Package names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#artifact-names" class="md-nav__link">
    <span class="md-ellipsis">
      Artifact names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-names" class="md-nav__link">
    <span class="md-ellipsis">
      Class names
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#design-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      Design Conventions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utilities" class="md-nav__link">
    <span class="md-ellipsis">
      Utilities
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Utilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#types-of-utilities" class="md-nav__link">
    <span class="md-ellipsis">
      Types of Utilities
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Types of Utilities">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class-specific-utilities" class="md-nav__link">
    <span class="md-ellipsis">
      Class Specific Utilities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#behavior-specific-utilities" class="md-nav__link">
    <span class="md-ellipsis">
      Behavior Specific Utilities
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/cqframework/clinical-reasoning/edit/master/docs/src/doc/docs/developer-guide.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="developer-guide">Developer Guide<a class="headerlink" href="#developer-guide" title="Permanent link">&para;</a></h1>
<h2 id="repository-structure">Repository Structure<a class="headerlink" href="#repository-structure" title="Permanent link">&para;</a></h2>
<p>This is a table of current artifacts in this project, and short description of what each artifact contains. See the <a href="#architecture">Architecture</a> section for more detailed information on why this project is structured this way.</p>
<table>
<thead>
<tr>
<th>Artifact</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cqf-fhir-api</code></td>
<td>FHIR platform services, FHIR repository APIs. The set of interfaces a platform needs to implement to use this project are contained here.</td>
</tr>
<tr>
<td><code>cqf-fhir-bom</code></td>
<td>Maven "Bill of Materials" for this repository, simplifying dependency management in downstream projects.</td>
</tr>
<tr>
<td><code>cqf-fhir-utility</code></td>
<td>Utilities to assist in the creation of FHIR clinical reasoning operations. Implementations of the above APIs for REST and in-memory use cases also live here, and act as a reference for how to implement the above APIs.</td>
</tr>
<tr>
<td><code>cqf-fhir-test</code></td>
<td>Utilities to assist writing unit tests for clinical reasoning operations.</td>
</tr>
<tr>
<td><code>cqf-fhir-cql</code></td>
<td>Core project for FHIR / CQL interop</td>
</tr>
<tr>
<td><code>cqf-fhir-cr</code></td>
<td>FHIR clinical reasoning operation implementations, such as <code>Measure/$evaluate-measure</code> and <code>PlanDefinition/$apply</code></td>
</tr>
<tr>
<td><code>cqf-fhir-cr-cli</code></td>
<td>CLI tool for running FHIR clinical reasoning operations</td>
</tr>
<tr>
<td><code>cqf-fhir-jaxb</code></td>
<td>Aggregator project for JAXB dependencies</td>
</tr>
<tr>
<td><code>cqf-fhir-jackson</code></td>
<td>Aggregator project for Jackson dependencies</td>
</tr>
</tbody>
</table>
<h2 id="contributing">Contributing<a class="headerlink" href="#contributing" title="Permanent link">&para;</a></h2>
<p>See the <a href="#java-guidance">Java Guidance</a> section for more detailed information.</p>
<h3 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h3>
<p>Java 11+ is required to build and run this project. You can build the project with <code>mvnw package</code>.</p>
<h3 id="licensing">Licensing<a class="headerlink" href="#licensing" title="Permanent link">&para;</a></h3>
<p>All contributions to this project will be licensed under Apache 2.0</p>
<h3 id="extensions">Extensions<a class="headerlink" href="#extensions" title="Permanent link">&para;</a></h3>
<p>If you're using VS Code, the <code>clinical-reasoning</code> repo suggests a list of Java extensions for static and style analysis. Please enable these recommended extensions, as they help detect issues with contributions prior to committing them or opening a PR.</p>
<h3 id="style-guide">Style Guide<a class="headerlink" href="#style-guide" title="Permanent link">&para;</a></h3>
<p>This project uses the <a href="https://google.github.io/styleguide/javaguide.html">Google Java Style</a>. Default formatter settings are already configured for VS Code. If you use another editor, please set it up accordingly.</p>
<h3 id="branch-policy">Branch Policy<a class="headerlink" href="#branch-policy" title="Permanent link">&para;</a></h3>
<p>All new development takes place on <code>&lt;feature&gt;</code> branches off <code>master</code>. Once feature development on the branch is complete, the feature branch is submitted to <code>master</code> as a PR. The PR is reviewed by maintainers and regression testing by the CI build occurs.</p>
<p>Changes to the <code>master</code> branch must be done through an approved PR. Delete branches after merging to keep the repository clean.</p>
<p>See <a href="TODO">Release Process</a> for related information.</p>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<p>In general, the clinical reasoning modules contained on this project can be enabled on a given platform by implementing the <a href="TODO">FHIR Repository API</a>. There are examples for that:</p>
<ul>
<li>In HAPI, connecting to a JPA layer</li>
<li>On Android, connecting to SQLite</li>
<li>In the test utilities, using a filesystem</li>
<li>In the client utilities, connecting to a remote FHIR server</li>
<li>In the standalone examples, using an in-memory data structure</li>
</ul>
<p>The specific usage of each module is documented in the module-specific section of the documentation. The <a href="#architecture">Architecture</a> gives an overview of why the FHIR Repository API was chosen and its design goals.</p>
<h2 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permanent link">&para;</a></h2>
<h3 id="background">Background<a class="headerlink" href="#background" title="Permanent link">&para;</a></h3>
<p>"Clinical Reasoning" is the application business logic in clinical settings. For example, given a certain diagnosis a clinician may prescribe a certain medication, or given a positive lab result for a contagious disease laws may require reporting of that result to a Public Health Authority (PHA). The primary concern of this repository is developing Clinical Reasoning capabilities for FHIR applications.</p>
<p><a href="https://hl7.org/fhir/">FHIR</a> is an platform is building interoperable clinical systems of systems (SoS). Use cases include:</p>
<ul>
<li>Storing electronic clinical data (EMRs)</li>
<li>Data exchange across payers, public health authorities, heath information exchanges, and between independent EMRs</li>
<li>Reporting clinical quality metrics or disease surveillance</li>
<li>Research and analytics on patient data</li>
<li>Creation and distribution of standardized clinical logic that can be run anywhere FHIR is supported</li>
</ul>
<p>FHIR defines a dedicated <a href="https://build.fhir.org/clinicalreasoning-module.html">Clinical Reasoning module</a> and that are numerous derivative "Implementation Guides" (IGs) that specify new uses based upon the core module, such as the <a href="https://build.fhir.org/ig/HL7/cqf-measures/">CQF Measures IG</a> that describes how to use Quality Measures within the FHIR ecosystem.</p>
<h4 id="systems-of-systems">Systems of Systems<a class="headerlink" href="#systems-of-systems" title="Permanent link">&para;</a></h4>
<p>Systems of Systems are collaborating systems that exhibit operational and managerial independence.</p>
<ul>
<li>Operational independence - each constituent system is operated to achieve a useful purpose independently</li>
<li>Managerial independence - each constituent system evolves to achieve its own ends independently</li>
</ul>
<p>Within the healthcare space an example are the various Electronic Medical Record (EMR) systems, Healthcare Information Exchanges (HIE), and Public Health Authorities (PHA) that interoperate for various purposes such as public health reporting, exchanging patient data, and so on.</p>
<p><img alt="System of Systems" src="../assets/diagrams/ref.fhir.clinical-reasoning.slides.sos.drawio.svg" /></p>
<p>A common approach to scaling an SoS is to build a "platform". An SoS platform:</p>
<ul>
<li>Promotes interoperability through<ul>
<li>Common communication mechanisms</li>
<li>Common information models (semantics)</li>
<li>Patterns or sequences of interaction</li>
</ul>
</li>
<li>Provides services and functions to all constituent systems</li>
<li>Reduces time and effort to develop or modify systems by<ul>
<li>Providing reference or concrete implementations of services</li>
<li>Replacing point-to-point integration with system-to-platform integration</li>
<li>Reducing barrier to entry for new systems to join SoS</li>
</ul>
</li>
<li>Enables modular substitution systems in the SoS<ul>
<li>Which supports an “ecosystem”</li>
</ul>
</li>
</ul>
<p>The Internet is an example of an SoS platform:</p>
<ul>
<li>Common communication mechanisms<ul>
<li>TCP/HTTP</li>
</ul>
</li>
<li>System-to-platform integration<ul>
<li>DNS servers allow you to access anything, anywhere</li>
</ul>
</li>
<li>Well-established patterns and sequences of interactions<ul>
<li>REST</li>
</ul>
</li>
<li>Connecting to one server looks like connecting to any other<ul>
<li>Allows (nearly) transparent middleware<ul>
<li>Routers, proxies, caching, authentication</li>
</ul>
</li>
<li>Allows arbitrarily deep/complex networks</li>
</ul>
</li>
</ul>
<p>An SoS Platform is frequently described as a set of standards. For example, all the RFCs that are published by the IETF for the Internet that describe things like REST. These standards function as a formal description of a set of functionality within the overall platform. SDKs for developing Internet applications exist in almost every programming language, such as HTTP client libraries.</p>
<h4 id="fhir-platform">FHIR Platform<a class="headerlink" href="#fhir-platform" title="Permanent link">&para;</a></h4>
<p>FHIR is an SoS Platform built on top of web standards and focused on clinical concepts. <a href="https://www.hl7.org/">Health Level Seven International</a> (HL7) manages the development of FHIR. FHIR provides (among other things):</p>
<ul>
<li>A Common data (meta)model and semantics<ul>
<li>FHIR "Resources" representing clinical concepts such as Patient, Encounter, Medication, etc.</li>
</ul>
</li>
<li>Common patterns for interaction<ul>
<li>FHIR REST API</li>
<li>SMART-on-FHIR</li>
<li>Bulk Data</li>
</ul>
</li>
<li>Extensibility and discovery mechanisms for adding new functionality to a systems</li>
</ul>
<p>Additionally, HL7 funds the development of reference implementations and provides some platform services, such as a common package registry for FHIR publications.</p>
<h3 id="hapi-fhir">HAPI FHIR<a class="headerlink" href="#hapi-fhir" title="Permanent link">&para;</a></h3>
<p><a href="https://hapifhir.io/hapi-fhir">HAPI FHIR</a> is an open-source Java SDK for building FHIR applications. It defines a set of object models, a persistence layer, an implementation of the FHIR REST API, and forms the basis of this project. In turn, some of the operations defined here are used to provide Clinical Reasoning functionality on the HAPI FHIR Server.</p>
<p><a href="https://www.smilecdr.com/">Smile Digital Health</a> is the maintainer and publisher of that HAPI FHIR project. The publisher of this project, <a href="https://www.alphora.com/">Alphora</a>, is a subsidiary of Smile Digital Health.</p>
<h3 id="design-goals">Design Goals<a class="headerlink" href="#design-goals" title="Permanent link">&para;</a></h3>
<p>This project is designed to provide reusable Clinical Reasoning modules for any Java and HAPI based application. This includes:</p>
<ul>
<li>Android, as part of the <a href="TODO">Google FHIR SDK</a></li>
<li><a href="TODO">eCR Now</a>, the CDC's reference implementation for contagious disease surveillance</li>
<li>Spark, for analytics use cases<ul>
<li><a href="https://www.alphora.com/">Alphora</a> provides a commercial solution</li>
</ul>
</li>
<li>VS Code, through the <a href="https://github.com/cqframework/vscode-cql">LSP</a><ul>
<li>Provides an IDE for authoring clinical logic in terms of FHIR/CQL</li>
</ul>
</li>
<li><a href="https://github.com/hapifhir/hapi-fhir">HAPI FHIR Server</a>, an open-source Clinical Data Repository (CDR)</li>
<li><a href="https://www.smilecdr.com/smilecdr">Smile CDR</a>, a commercial CDR</li>
<li>Various other open-source and commercial implementations</li>
</ul>
<h3 id="hexagonal-architecture">Hexagonal Architecture<a class="headerlink" href="#hexagonal-architecture" title="Permanent link">&para;</a></h3>
<p>Hexagonal architecture is an approach that abstracts the repository layer so that logic modules can be reused. This is a form of IoC, flipping the top-down dependencies that are common in layered architecture.</p>
<ul>
<li>Dependencies point outside-in instead of top-down</li>
<li>Common data model at the core (HAPI FHIR)</li>
<li>Repository abstraction allows multiple backends</li>
<li>Common in microservice architectures - Mini SoS!</li>
</ul>
<p><img alt="Hexagonal Architecture" src="../assets/diagrams/ref.fhir.clinical-reasoning.slides.hexagonal.drawio.svg" /></p>
<p>The modules in this project can be used on any platform that is able to implement the FHIR Repository API.</p>
<h3 id="fhir-repository">FHIR Repository<a class="headerlink" href="#fhir-repository" title="Permanent link">&para;</a></h3>
<p>The FHIR Repository API is essentially a Java projection of the FHIR REST API. This allows the composition of FHIR services (and in particular clinical reasoning services) because each layer looks the same to both the layer above and the layer below, much like how the Internet is a set of inter-connected services, some of which provide routing, proxying, caching, etc. It also gives a relatively small API surface that needs to be implemented in order to support clinical reasoning on a given platform. The API is specified <a href="TODO">here</a>.</p>
<h2 id="java-guidance">Java Guidance<a class="headerlink" href="#java-guidance" title="Permanent link">&para;</a></h2>
<p>This section contains some high-level guidance on style, best-practices, conventions, etc. <a href="#architecture">Architecture</a> is covered further below.</p>
<h3 id="discovery-and-maintainability">Discovery and Maintainability<a class="headerlink" href="#discovery-and-maintainability" title="Permanent link">&para;</a></h3>
<p>Following conventions such as those below make it easier for the next developer to find code that's already been implemented and  to understand and improve code that's already been written more easily.</p>
<h3 id="best-practices">Best Practices<a class="headerlink" href="#best-practices" title="Permanent link">&para;</a></h3>
<p>Code should generally follow Java best-practices as outlined in <a href="https://www.pearson.com/us/higher-education/program/Bloch-Effective-Java-3rd-Edition/PGM1763855.html">Effective Java 3rd Edition</a>.</p>
<p>If using VS Code, the Sonarlint plugin will be suggested to help detect issues early on.</p>
<h3 id="javadoc">Javadoc<a class="headerlink" href="#javadoc" title="Permanent link">&para;</a></h3>
<p>This project has strict checking for Javadoc enabled.  This will cause a build failure in the event of a Javadoc warning.  Visit <a href="https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html">https://www.oracle.com/technical-resources/articles/java/javadoc-tool.html</a> for more info.</p>
<p>Results of Javadoc can be found in the output of the build.</p>
<h3 id="testing">Testing<a class="headerlink" href="#testing" title="Permanent link">&para;</a></h3>
<p>Most of the components and operations in this repository are built around an interface representing a conceptual FHIR API, the idea being that any given Java-based FHIR platform or toolkit can provide an implementation of this API to enabled the use of CQL or Clinical Reasoning on that platform. The <code>cqf-fhir-test</code> project provides a set of utilities (specifically an implementation of that API that can read test <code>resource</code> files) to facilitate easier unit testing. There are examples of tests using this utility <a href="TODO">here</a></p>
<h3 id="naming-conventions">Naming Conventions<a class="headerlink" href="#naming-conventions" title="Permanent link">&para;</a></h3>
<h4 id="package-names">Package names<a class="headerlink" href="#package-names" title="Permanent link">&para;</a></h4>
<ul>
<li>Should be rooted with <code>org.opencds.cqf.fhir</code></li>
<li>For the sake of brevity, <code>clinicalreasoning</code> is abbreviated <code>cr</code> in package names</li>
<li>Package names should reflect high-level areas of functionality:<ul>
<li><code>org.opencds.cqf.fhir.utility</code><ul>
<li>Non-FHIR version specific utilities</li>
</ul>
</li>
<li><code>org.opencds.cqf.fhir.cql</code><ul>
<li>Non-FHIR version specific CQL components</li>
</ul>
</li>
</ul>
</li>
<li>If a FHIR version is specified, it should come after the high-level functionality described:<ul>
<li><code>org.opencds.cqf.fhir.cql.r5</code><ul>
<li>An example package name for CQL-related functionality tied to R5</li>
</ul>
</li>
</ul>
</li>
<li>If a Resource name if specified, it should generally come after the FHIR version<ul>
<li><code>org.opencds.cqf.fhir.cr.dstu3.measure</code><ul>
<li>An example package name for Measure-related functionality tied to DSTU3</li>
<li>Exception: There may be a few cases where functionality for a Resource is not FHIR-version specific, in which case the FHIR version should be omitted<ul>
<li><code>org.opencds.cqf.fhir.cr.plandefinition</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Generally, the package name prefix should one of:<ul>
<li><code>org.opencds.cqf.fhir.api</code></li>
<li><code>org.opencds.cqf.fhir.utility</code></li>
<li><code>org.opencds.cqf.fhir.cql</code></li>
<li><code>org.opencds.cqf.fhir.elm</code></li>
<li><code>org.opencds.cqf.fhir.cr</code></li>
<li><code>org.opencds.cqf.fhir.cdshooks</code></li>
<li>If you find a use case that doesn't fall under one those prefixes, it may be out of scope for this repository.</li>
</ul>
</li>
<li>Java 9+ modules require that each artifact have only one root package name that's exported. If you find the need for multiple root namespaces, consider that you may need to create a new artifact.</li>
</ul>
<h4 id="artifact-names">Artifact names<a class="headerlink" href="#artifact-names" title="Permanent link">&para;</a></h4>
<ul>
<li>Should start with <code>cqf-fhir</code></li>
<li>Should reflect the root package name for the artifact<ul>
<li><code>org.opencds.cqf.fhir.cql</code> -&gt; <code>cqf-fhir-cql</code></li>
<li><code>org.opencds.cqf.fhir.utility</code> -&gt; <code>cqf-fhir-utility</code></li>
</ul>
</li>
<li>Exception: If there is a FHIR-version in the package name, it should come <em>last</em> in the artifact name. This is to match the conventions already established by the FHIR core and HAPI FHIR projects<ul>
<li><code>org.opencds.cqf.fhir.cr.r5.measure</code> -&gt; <code>cqf-fhir-cr-measure-r5</code></li>
</ul>
</li>
</ul>
<h4 id="class-names">Class names<a class="headerlink" href="#class-names" title="Permanent link">&para;</a></h4>
<ul>
<li>Should follow the conventions established by <a href="#best-practices">Effective Java</a>.</li>
<li>Utility classes should follow the conventions established in the <a href="#utilities">Utilities</a> section.</li>
<li>There are several cases where this project implements a "runtime" for standards-based content. In other words, the clinical logic isn't implemented by java, but rather by some FHIR Resource or CQL, and the Java provides an execution environment for that logic:<ul>
<li><code>Measure</code> evaluation</li>
<li><code>PlanDefinition</code> application</li>
<li><code>ActivityDefinition</code> application
  These cases require special approaches to design an extensible and debuggable runtime, discussed further in the <a href="#architecture">Architecture</a> section, and the class names should follow conventions for naming runtimes:<ul>
<li><code>CqlEngine</code></li>
<li><code>FhirPathEngine</code></li>
<li><code>MeasureEvaluationRuntime</code></li>
<li><code>ActivityDefinitionEngine</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="design-conventions">Design Conventions<a class="headerlink" href="#design-conventions" title="Permanent link">&para;</a></h3>
<h3 id="utilities">Utilities<a class="headerlink" href="#utilities" title="Permanent link">&para;</a></h3>
<h4 id="types-of-utilities">Types of Utilities<a class="headerlink" href="#types-of-utilities" title="Permanent link">&para;</a></h4>
<p>In general, reusable utilities are separated along two different dimensions, Classes and Behaviors.</p>
<p>Class specific utilities are functions that are associated with specific class or interface, and add functionality to that class.</p>
<p>Behavior specific utilities allow the reuse of behavior across many different classes.</p>
<h5 id="class-specific-utilities">Class Specific Utilities<a class="headerlink" href="#class-specific-utilities" title="Permanent link">&para;</a></h5>
<p>Utility or Helper methods that are associated with a single class should go into a class that has the pluralized name of the associated class. For example, utilities for <code>Client</code> should go into the <code>Clients</code> class. This ensures that the utility class is focused on one class and allows for more readable code:</p>
<p><code>Clients.forUrl("test.com")</code></p>
<p>as opposed to:</p>
<p><code>ClientUtilities.createClient("test.com")</code></p>
<p>or, if you put unrelated code into the class, you might end up with something like:</p>
<p><code>Clients.parseRegex()</code></p>
<p>If the code doesn't read clearly after you've added an utility, consider that it may not be in the right place.</p>
<p>In general, all the functions for this type of utility should be <code>static</code>. No internal state should be maintained (<code>static final</code>, or immutable, state is ok). If you final that your utility class contains mutable state, consider an alternate design.</p>
<p>Examples</p>
<ul>
<li>Factory functions</li>
<li>Adding behavior to a class you can't extend</li>
</ul>
<h5 id="behavior-specific-utilities">Behavior Specific Utilities<a class="headerlink" href="#behavior-specific-utilities" title="Permanent link">&para;</a></h5>
<p>If there is behavior you'd like to share across many classes, model that as an interface and use a name that follows the pattern <code>"ThingDoer"</code>. For example, all the classes that access a database might be <code>DatabaseReader</code>. Use <code>default</code> interface implementations to write logic that can be shared many places. The interfaces themselves shouldn't have mutable state (again <code>static final</code> is ok). If it's necessary for the for shared logic to have access to state, model that as an method without a default implementation. For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kd">interface</span> <span class="nc">DatabaseReader</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">   </span><span class="n">Database</span><span class="w"> </span><span class="nf">getDb</span><span class="p">();</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">   </span><span class="k">default</span><span class="w"> </span><span class="n">Entity</span><span class="w"> </span><span class="nf">read</span><span class="p">(</span><span class="n">Id</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">getDb</span><span class="p">().</span><span class="na">connect</span><span class="p">().</span><span class="na">find</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">   </span><span class="p">}</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="p">}</span>
</code></pre></div>
<p>In the above example any class that has access to a <code>Database</code> can inherit the <code>read</code> behavior.</p>
<p>Examples</p>
<ul>
<li>Cross-cutting concerns<ul>
<li>Data Access</li>
<li>Logging</li>
<li>Parameter Validation</li>
</ul>
</li>
</ul>
<p>Functions associated with only one operation or a small set of related classes should not be modeled as a "Behavior". Default interfaces can be easily abused in this way. Ask yourself "would I use this in an operation for a totally unrelated FHIR Resource?". If not, it's not a cross-cutting behavior.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2019+ Smile Digital Health
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://chat.fhir.org/#narrow/stream/179220-cql" target="_blank" rel="noopener" title="chat.fhir.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M88.2 309.1c9.8-18.3 6.8-40.8-7.5-55.8C59.4 230.9 48 204 48 176c0-63.5 63.8-128 160-128s160 64.5 160 128-63.8 128-160 128c-13.1 0-25.8-1.3-37.8-3.6-10.4-2-21.2-.6-30.7 4.2q-6.15 3.15-12.6 6c-16 7.2-32.9 13.5-49.9 18 2.8-4.6 5.4-9.1 7.9-13.6 1.1-1.9 2.2-3.9 3.2-5.9zM208 352c114.9 0 208-78.8 208-176S322.9 0 208 0 0 78.8 0 176c0 41.8 17.2 80.1 45.9 110.3-.9 1.7-1.9 3.5-2.8 5.1-10.3 18.4-22.3 36.5-36.6 52.1-6.6 7-8.3 17.2-4.6 25.9C5.8 378.3 14.4 384 24 384c43 0 86.5-13.3 122.7-29.7 4.8-2.2 9.6-4.5 14.2-6.8 15.1 3 30.9 4.5 47.1 4.5m224 128c16.2 0 31.9-1.6 47.1-4.5 4.6 2.3 9.4 4.6 14.2 6.8C529.5 498.7 573 512 616 512c9.6 0 18.2-5.7 22-14.5s2-19-4.6-25.9c-14.2-15.6-26.2-33.7-36.6-52.1-.9-1.7-1.9-3.4-2.8-5.1 28.8-30.3 46-68.6 46-110.4 0-94.4-87.9-171.5-198.2-175.8 4.1 15.2 6.2 31.2 6.2 47.8v.6c87.2 6.7 144 67.5 144 127.4 0 28-11.4 54.9-32.7 77.2-14.3 15-17.3 37.6-7.5 55.8 1.1 2 2.2 4 3.2 5.9 2.5 4.5 5.2 9 7.9 13.6-17-4.5-33.9-10.7-49.9-18q-6.45-2.85-12.6-6c-9.5-4.8-20.3-6.2-30.7-4.2-12.1 2.4-24.8 3.6-37.8 3.6-61.7 0-110-26.5-136.8-62.3-16 5.4-32.8 9.4-50 11.8C279 439.8 350 480 432 480"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/cqframework/clinical-reasoning" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.action.edit"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.f13b1293.min.js"></script>
      
    
  </body>
</html>