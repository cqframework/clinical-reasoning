{
  "resourceType": "Library",
  "id": "TJCOverall-FHIR3-3.6.000",
  "text": {
    "status": "generated",
    "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><table class=\"grid dict\"><tr><th scope=\"row\"><b>Id: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">library-TJCOverall-FHIR3-3.6.000</td></tr><tr><th scope=\"row\"><b>Type: </b></th><td style=\"padding-right: 25px;\"> Logic Library </td></tr><tr><th scope=\"row\"><b>Version: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">3.6.000</td></tr><tr><th scope=\"row\"><b>Status: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">active</td></tr><tr style=\"vertical-align: top;\"><th rowspan=\"3\" scope=\"row\"><b>Related: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>Library/FHIRHelpers-3.0.0</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>Library/MATGlobalCommonFunctions-FHIR3-4.0.000</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>Library/SupplementalDataElements-FHIR3-1.0.0</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><th rowspan=\"4\" scope=\"row\"><b>Data Requirements: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>ProcedureRequest</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/1.3.6.1.4.1.33895.1.3.0.45</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Procedure</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/1.3.6.1.4.1.33895.1.3.0.45</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.424</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Patient</span></p></div></td></tr><tr style=\"vertical-align: top;\"><th scope=\"row\"><b>Content: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><b>type: </b><span>text/cql</span></td></tr><tr><td colspan=\"2\" style=\"padding-left: 25px; padding-right: 25px;\"><pre><code class=\"language-cql\">library TJCOverall_FHIR3 version '3.6.000'\n\nusing FHIR version '3.0.0'\ninclude FHIRHelpers version '3.0.0' called FHIRHelpers\n//TODO: MATGlobalCommonFunctions_FHIR version '2.0.000' need to be updated to 4.0\ninclude MATGlobalCommonFunctions_FHIR3 version '4.0.000' called Global\ninclude SupplementalDataElements_FHIR3 version '1.0.0' called SDE\n\ncodesystem &quot;SNOMEDCT&quot;: 'http://snomed.info/sct/731000124108'\ncodesystem &quot;LOINC&quot;: 'http://loinc.org'\n\nvalueset &quot;Comfort Measures&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/1.3.6.1.4.1.33895.1.3.0.45'\nvalueset &quot;Discharge To Acute Care Facility&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.87'\nvalueset &quot;Discharged to Health Care Facility for Hospice Care&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.207'\nvalueset &quot;Discharged to Home for Hospice Care&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.209'\nvalueset &quot;Emergency Department Visit&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292'\nvalueset &quot;Encounter Inpatient&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307'\nvalueset &quot;Hemorrhagic Stroke&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.212'\nvalueset &quot;Ischemic Stroke&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.247'\nvalueset &quot;Left Against Medical Advice&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.308'\nvalueset &quot;Non-Elective Inpatient Encounter&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.424'\nvalueset &quot;Patient Expired&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.309'\nvalueset &quot;Ticagrelor Therapy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1110.39'\nvalueset &quot;Observation Services&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.143'\n\ncode &quot;Birth date&quot;: '21112-8' from &quot;LOINC&quot; display 'Birth date'\n\nparameter &quot;Measurement Period&quot; Interval&lt;DateTime&gt;\n\ncontext Patient\n\ndefine &quot;Intervention Comfort Measures&quot;:\n\t([&quot;ProcedureRequest&quot;: &quot;Comfort Measures&quot;] P\n\t\twhere P.intent = 'order')\n\t\tunion\n\t\t([&quot;Procedure&quot;: &quot;Comfort Measures&quot;] InterventionPerformed\n\t\twhere InterventionPerformed.status = 'completed')\n\ndefine &quot;All Stroke Encounter&quot;:\n\t&quot;Non Elective Inpatient Encounter&quot; NonElectiveEncounter\n    where Global.PrincipalDiagnosis(NonElectiveEncounter).code in &quot;Hemorrhagic Stroke&quot;\n      or Global.PrincipalDiagnosis(NonElectiveEncounter).code in &quot;Ischemic Stroke&quot;\n\ndefine &quot;Ischemic Stroke Encounter&quot;:\n\t&quot;Encounter with Principal Diagnosis and Age&quot; EncounterWithAge\n\t\twhere Global.PrincipalDiagnosis(EncounterWithAge).code in &quot;Ischemic Stroke&quot;\n\ndefine &quot;Non Elective Inpatient Encounter&quot;:\n\t[&quot;Encounter&quot;: &quot;Non-Elective Inpatient Encounter&quot;] NonElectiveEncounter\n\t\twhere Global.&quot;LengthInDays&quot;(NonElectiveEncounter.period)&lt;= 120\n\t\t\tand NonElectiveEncounter.period ends during &quot;Measurement Period&quot;\n\ndefine &quot;Ischemic Stroke Encounters with Discharge Disposition&quot;:\n\t( ( &quot;Ischemic Stroke Encounter&quot; IschemicStrokeEncounter\n\t\t\t\twhere IschemicStrokeEncounter.hospitalization.dischargeDisposition in &quot;Discharge To Acute Care Facility&quot;\n\t\t\t\t\tor IschemicStrokeEncounter.hospitalization.dischargeDisposition in &quot;Left Against Medical Advice&quot;\n\t\t\t\t\tor IschemicStrokeEncounter.hospitalization.dischargeDisposition in &quot;Patient Expired&quot;\n\t\t\t\t\tor IschemicStrokeEncounter.hospitalization.dischargeDisposition in &quot;Discharged to Home for Hospice Care&quot;\n\t\t\t\t\tor IschemicStrokeEncounter.hospitalization.dischargeDisposition in &quot;Discharged to Health Care Facility for Hospice Care&quot;\n\t\t)\n\t)\n\ndefine &quot;Comfort Measures during Hospitalization&quot;:\n\t&quot;Ischemic Stroke Encounter&quot; IschemicStrokeEncounter\n\t\twith &quot;Intervention Comfort Measures&quot; ComfortMeasure\n\t\t\tsuch that Coalesce(start of FHIRHelpers.ToInterval(ComfortMeasure.performed), ComfortMeasure.authoredOn)during Global.&quot;HospitalizationWithObservation&quot;(IschemicStrokeEncounter)\n\ndefine &quot;Encounter with Principal Diagnosis and Age&quot;:\n\t&quot;All Stroke Encounter&quot; AllStrokeEncounter\n\t\twith [&quot;Patient&quot;] BirthDate\n\t\t\tsuch that Global.&quot;CalendarAgeInYearsAt&quot;(FHIRHelpers.ToDate(BirthDate.birthDate), start of FHIRHelpers.ToInterval(AllStrokeEncounter.period)) &gt;= 18\n\ndefine function &quot;CalendarDayOfOrDayAfter&quot;(StartValue DateTime ):\n\tInterval(Global.&quot;ToDate&quot;(StartValue), Global.&quot;ToDate&quot;(StartValue + 2 days))\n</code></pre>\n                    \n                    \n                </td>\n            </tr>\n        \n    </table>\n</div>"
  },
  "extension": [ {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
    "valueReference": {
      "reference": "cqf-tooling"
    }
  } ],
  "version": "3.6.000",
  "name": "TJCOverall_FHIR3",
  "status": "active",
  "experimental": true,
  "type": {
    "coding": [ {
      "system": "http://hl7.org/fhir/library-type",
      "code": "logic-library"
    } ]
  },
  "relatedArtifact": [ {
    "type": "depends-on",
    "resource": {
      "reference": "Library/FHIR-ModelInfo-3.0.0"
    }
  }, {
    "type": "depends-on",
    "resource": {
      "reference": "Library/FHIRHelpers-3.0.0"
    }
  }, {
    "type": "depends-on",
    "resource": {
      "reference": "Library/MATGlobalCommonFunctions-FHIR3-4.0.000"
    }
  }, {
    "type": "depends-on",
    "resource": {
      "reference": "Library/SupplementalDataElements-FHIR3-1.0.0"
    }
  }, {
    "type": "depends-on",
    "resource": {
      "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/1.3.6.1.4.1.33895.1.3.0.45"
    }
  }, {
    "type": "depends-on",
    "resource": {
      "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.87"
    }
  }, {
    "type": "depends-on",
    "resource": {
      "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.207"
    }
  }, {
    "type": "depends-on",
    "resource": {
      "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.209"
    }
  }, {
    "type": "depends-on",
    "resource": {
      "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292"
    }
  }, {
    "type": "depends-on",
    "resource": {
      "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"
    }
  }, {
    "type": "depends-on",
    "resource": {
      "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.212"
    }
  }, {
    "type": "depends-on",
    "resource": {
      "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.247"
    }
  }, {
    "type": "depends-on",
    "resource": {
      "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.308"
    }
  }, {
    "type": "depends-on",
    "resource": {
      "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.424"
    }
  }, {
    "type": "depends-on",
    "resource": {
      "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.309"
    }
  }, {
    "type": "depends-on",
    "resource": {
      "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1110.39"
    }
  }, {
    "type": "depends-on",
    "resource": {
      "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.143"
    }
  } ],
  "parameter": [ {
    "name": "Measurement Period",
    "use": "in",
    "min": 0,
    "max": "1",
    "type": "Period"
  }, {
    "name": "Patient",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Patient"
  }, {
    "name": "Intervention Comfort Measures",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Any"
  }, {
    "name": "Non Elective Inpatient Encounter",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Encounter"
  }, {
    "name": "All Stroke Encounter",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Encounter"
  }, {
    "name": "Encounter with Principal Diagnosis and Age",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Encounter"
  }, {
    "name": "Ischemic Stroke Encounter",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Encounter"
  }, {
    "name": "Ischemic Stroke Encounters with Discharge Disposition",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Encounter"
  }, {
    "name": "Comfort Measures during Hospitalization",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Encounter"
  } ],
  "content": [ {
    "contentType": "text/cql",
    "url": "../../cql/TJCOverall_FHIR3.cql"
  } ]
}